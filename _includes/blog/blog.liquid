<div class="posts">
  {% unless paginator.posts %}
    <article><section class="post-content"><p>There are no blog posts</p></section></article>
  {% endunless %}

  {% assign pinned_posts = site.posts | where_exp: "p", "p.pinned == true" %}
  {% if paginator.page == 1 and pinned_posts.size > 0 %}
    {% for post in pinned_posts limit:1 %}
      <div class="post-teaser">
        {% if post.thumbnail %}
        <div class="post-img">
          <a aria-label="{{ post.title }}" href="{{ post.url | relative_url }}">
            <img alt="{{ post.title }}" src="{{ post.thumbnail | relative_url }}">
          </a>
        </div>
        {% endif %}
        <span>
          <header>
            <h1>
              <a aria-label="{{ post.title }}" class="post-link" href="{{ post.url | relative_url }}">
                ðŸ“Œ {{ post.title }}
              </a>
            </h1>
            {% include blog/post_info.liquid author=post.author date=post.date %}
          </header>
          {% if site.excerpt or site.theme_settings.excerpt %}
            <div class="excerpt">
              {% if site.excerpt == "truncate" %}
                {{ post.content | strip_html | truncatewords: 20, "..." }}
              {% else %}
                {{ post.excerpt | strip_html | truncatewords: 10, "..." }}
              {% endif %}
            </div>
          {% endif %}
        </span>
      </div>
    {% endfor %}
  {% endif %}

  {% for post in paginator.posts %}
    {% unless post.pinned %}
      <div class="post-teaser">
        {% if post.thumbnail %}
        <div class="post-img">
          <a aria-label="{{ post.title }}" href="{{ post.url | relative_url }}">
            <img alt="{{ post.title }}" src="{{ post.thumbnail | relative_url }}">
          </a>
        </div>
        {% endif %}
        <span>
          <header>
            <h1>
              <a aria-label="{{ post.title }}" class="post-link" href="{{ post.url | relative_url }}">
                {{ post.title }}
              </a>
            </h1>
            {% include blog/post_info.liquid author=post.author date=post.date %}
          </header>
          {% if site.excerpt or site.theme_settings.excerpt %}
              <div class="excerpt">
                  {% if site.excerpt == "truncate" %}
                     {{ post.content | strip_html | truncatewords: 20, "..." }}
                  {% else %}
                     {{ post.excerpt | strip_html | truncatewords: 10, "..." }}
                  {% endif %}
              </div>
          {% endif %}
        </span>
      </div>
    {% endunless %}
  {% endfor %}
</div>

{% include blog/blog_nav.liquid %}